# 代理模式<a name="istio_01_0022"></a>

## 代理模式概述<a name="section28973318286"></a>

**sidecar-proxy**

sidecar-proxy代理模式，网格代理将会被安装在网格中每个pod的sidecar，通过在每个pod独立的网络命名空间设置iptables 规则，将应用服务的出入流量重定向到sidecar的Envoy进程上，由 Envoy进行流量路由。

**node-proxy**

node-proxy代理模式，网格代理将会被安装在添加到该网格的每个集群的每个节点上，通过在每个节点上设置 iptables  规则，将应用服务的出入流量重定向到节点的Envoy进程上，由 Envoy进行流量路由。

## 代理模式的对比<a name="section7334134553519"></a>

**表 1**  代理模式的对比

<a name="table79222102361"></a>
<table><thead align="left"><tr id="row79252100367"><th class="cellrowborder" valign="top" width="27.700000000000003%" id="mcps1.2.3.1.1"><p id="p1292551015362"><a name="p1292551015362"></a><a name="p1292551015362"></a>代理模式</p>
</th>
<th class="cellrowborder" valign="top" width="72.3%" id="mcps1.2.3.1.2"><p id="p292511014368"><a name="p292511014368"></a><a name="p292511014368"></a>特点</p>
</th>
</tr>
</thead>
<tbody><tr id="row1892551017366"><td class="cellrowborder" valign="top" width="27.700000000000003%" headers="mcps1.2.3.1.1 "><p id="p8925610153611"><a name="p8925610153611"></a><a name="p8925610153611"></a>sidecar-proxy</p>
</td>
<td class="cellrowborder" valign="top" width="72.3%" headers="mcps1.2.3.1.2 "><a name="ul59891639164615"></a><a name="ul59891639164615"></a><ul id="ul59891639164615"><li>独立的网络命名空间设置iptables规则，不互相影响</li><li>网格代理资源占用率高</li></ul>
</td>
</tr>
<tr id="row9926151015366"><td class="cellrowborder" valign="top" width="27.700000000000003%" headers="mcps1.2.3.1.1 "><p id="p10926171017360"><a name="p10926171017360"></a><a name="p10926171017360"></a>node-proxy</p>
</td>
<td class="cellrowborder" valign="top" width="72.3%" headers="mcps1.2.3.1.2 "><a name="ul199805244518"></a><a name="ul199805244518"></a><ul id="ul199805244518"><li>网格代理资源占用率低</li><li>提升CPU利用率</li><li>优化网络连接，提升性能</li><li>暂不支持高可用</li></ul>
</td>
</tr>
</tbody>
</table>

